# nixpacks.toml

[phases.setup]
# 1. Only install OpenSSL (System dependency for Prisma)
# We do NOT list nodejs here; Nixpacks detects it from package.json
nixPkgs = ["openssl"]

[phases.install]
dependsOn = ["setup"]
# 2. Use 'npx' to execute pnpm.
# This bypasses the PATH issue by letting npx locate or download the binary.
cmds = ["npx -y pnpm@9 install"]

[phases.build]
dependsOn = ["install"]
cmds = ["npx -y pnpm@9 build"]

[start]
cmd = "npx -y pnpm@9 start"