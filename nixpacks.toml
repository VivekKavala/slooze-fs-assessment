# nixpacks.toml

[phases.setup]
nixPkgs = ["nodejs-20_x", "openssl"]

[phases.install]
dependsOn = ["setup"]
# Force install pnpm immediately before using it in the same shell
cmds = ["npm install -g pnpm@9 && pnpm install"]

[phases.build]
dependsOn = ["install"]
# Force install pnpm immediately before using it for build
cmds = ["npm install -g pnpm@9 && pnpm build"]

[start]
# Force install pnpm immediately before start
cmd = "npm install -g pnpm@9 && pnpm start"