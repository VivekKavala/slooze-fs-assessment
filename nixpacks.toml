# nixpacks.toml

[phases.setup]
# 1. Install Node 20, OpenSSL, AND pnpm directly via Nix
# This guarantees the binary is in the global $PATH
nixPkgs = ["nodejs-20_x", "openssl", "pnpm"]

[phases.install]
dependsOn = ["setup"]
cmds = ["pnpm install"]

[phases.build]
dependsOn = ["install"]
# 3. Prisma generate is crucial before build
cmds = ["pnpm build"]

[start]
cmd = "pnpm start"