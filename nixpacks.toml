# nixpacks.toml

[phases.setup]
# 1. Only install OpenSSL (System dependency for Prisma)
# We do NOT list nodejs here; Nixpacks detects it from package.json
nixPkgs = ["openssl"]

# 2. Install pnpm globally using npm to ensure it's available for npx
cmds = ["npm install -g pnpm"]

[phases.install]
dependsOn = ["setup"]
# 3. Use 'npx -y pnpm' to run commands.
# This bypasses the PATH issue by letting npx locate the binary.
cmds = ["npx -y pnpm install"]

[phases.build]
dependsOn = ["install"]
cmds = ["npx -y pnpm build"]

[start]
cmd = "npx -y pnpm start"