# nixpacks.toml

[phases.setup]
# 1. Only install OpenSSL (System dependency for Prisma)
# We do NOT list nodejs here; Nixpacks detects it from package.json
nixPkgs = ["openssl"]

# 2. Install pnpm globally using npm
# This is safer than relying on nix packages which might change names
cmds = ["npm install -g pnpm"]

[phases.install]
dependsOn = ["setup"]
cmds = ["pnpm install"]

[phases.build]
dependsOn = ["install"]
cmds = ["pnpm build"]

[start]
cmd = "pnpm start"