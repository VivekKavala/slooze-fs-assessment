# nixpacks.toml

[phases.setup]
# 1. Use 'nodejs_20' (underscore) which is the correct Nix attribute
# 2. We include 'pnpm' so it installs at the system level
# 3. 'jq' and 'wget' ensure cache busting if needed
nixPkgs = ["nodejs_20", "openssl", "pnpm", "jq", "wget"]

[phases.install]
dependsOn = ["setup"]
cmds = ["pnpm install"]

[phases.build]
dependsOn = ["install"]
cmds = ["pnpm build"]

[start]
cmd = "pnpm start"